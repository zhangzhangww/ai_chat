import"./request-BWjB7kre.js";/* empty css                  */import{a as B,u as I,b as U,d as F}from"./promptType-sp0Rc7oK.js";import{C as L,r as f,y as _,j as M,E as p,c as P,a as g,e as o,w as s,D as $,G as j,H as A,I as O,h as m,J as G,L as H,M as J,N as R,O as q,o as K,_ as Q}from"./index-CclMgo0x.js";const W={class:"content-item"},X={class:"header"},Y={class:"page"},Z=L({__name:"type",setup(ee){const c=f([]),b=f();f("0");const n=_({pageNum:1,pageSize:10,total:0}),a=_({dialogVisible:!1,isEdit:!1,form:{typeName:"",typeId:1,orderNumber:1}});M(()=>{i()});const w=t=>{const e=new FormData;return Object.entries(t).forEach(([r,d])=>{e.append(r,String(d))}),e},i=async()=>{try{const{data:t}=await B(n.pageNum,n.pageSize);n.total=t.total,c.value=t.rows.map(e=>({...e,promptType:Number(e.promptType)}))}catch{p.error("获取数据失败")}},N=t=>{i()},E=t=>{i()},V=async()=>{try{const t=w(a.form);a.isEdit?(await I(t),p.success("更新成功")):(await U(t),p.success("添加成功")),a.dialogVisible=!1,await i()}catch{p.error("操作失败")}},C=()=>{a.isEdit=!1,a.form={typeName:"",typeId:1,orderNumber:1},a.dialogVisible=!0},v=t=>{a.isEdit=!0,a.form={...t},a.dialogVisible=!0},x=async t=>{try{await q.confirm("确定删除该记录吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),await F(t.typeId),p.success("删除成功"),await i()}catch{}},z=()=>{var t;(t=b.value)==null||t.resetFields()};return(t,e)=>{const r=$,d=G,T=j,k=A,y=R,u=J,S=H,D=O;return K(),P("div",W,[g("div",X,[e[8]||(e[8]=g("h2",null,"类型管理",-1)),o(r,{type:"primary",onClick:C},{default:s(()=>e[7]||(e[7]=[m("新增类型")])),_:1})]),o(T,{data:c.value,border:"",style:{width:"100%","max-height":"80%",overflow:"auto"}},{default:s(()=>[o(d,{label:"序号",type:"index",width:"60"}),o(d,{label:"类型名称",prop:"typeName","show-overflow-tooltip":""}),o(d,{label:"操作",width:"180",fixed:"right"},{default:s(({row:l})=>[o(r,{size:"small",onClick:h=>v(l)},{default:s(()=>e[9]||(e[9]=[m("编辑")])),_:2},1032,["onClick"]),o(r,{size:"small",type:"danger",onClick:h=>x(l)},{default:s(()=>e[10]||(e[10]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),g("div",Y,[o(k,{background:"",layout:"total, sizes, prev, pager, next",total:n.total,"onUpdate:total":e[0]||(e[0]=l=>n.total=l),"page-size":n.pageSize,"onUpdate:pageSize":e[1]||(e[1]=l=>n.pageSize=l),onCurrentChange:N,onSizeChange:E,"current-page":n.pageNum,"onUpdate:currentPage":e[2]||(e[2]=l=>n.pageNum=l)},null,8,["total","page-size","current-page"])]),o(D,{modelValue:a.dialogVisible,"onUpdate:modelValue":e[6]||(e[6]=l=>a.dialogVisible=l),title:a.isEdit?"编辑类型":"新增类型",width:"600px",onClosed:z},{default:s(()=>[o(S,{model:a.form,"label-width":"100px"},{default:s(()=>[o(u,{label:"类型名称：",prop:"typeName"},{default:s(()=>[o(y,{modelValue:a.form.typeName,"onUpdate:modelValue":e[3]||(e[3]=l=>a.form.typeName=l),type:"textarea",rows:3,placeholder:"请输入类型名称"},null,8,["modelValue"])]),_:1}),o(u,{label:"排序：",prop:"orderNumber"},{default:s(()=>[o(y,{modelValue:a.form.orderNumber,"onUpdate:modelValue":e[4]||(e[4]=l=>a.form.orderNumber=l),type:"text",rows:3,placeholder:"请输入排序"},null,8,["modelValue"])]),_:1}),o(u,{class:"dialog-footer"},{default:s(()=>[o(r,{onClick:e[5]||(e[5]=l=>a.dialogVisible=!1)},{default:s(()=>e[11]||(e[11]=[m("取 消")])),_:1}),o(r,{type:"primary",onClick:V},{default:s(()=>e[12]||(e[12]=[m("确 定")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),se=Q(Z,[["__scopeId","data-v-81490884"]]);export{se as default};
