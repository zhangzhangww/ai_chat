import{a as M,u as R,b as $,d as G}from"./aiChat-CUG9W8Lh.js";import{B as O,r as y,u as V,g as j,E as f,x as H,c as J,a as b,b as t,w as l,z as K,C as q,D as Q,G as W,H as X,o as Y,I as Z,d as p,J as ee,K as te,t as oe,L as ae,M as le,N as ne,A as pe,O as se,_ as ie}from"./index-JjiUIBJv.js";const re={class:"content-item"},de={class:"search"},me={class:"search__left"},ue={class:"search__right"},fe={class:"page"},ge=O({__name:"account",setup(ce){const v=y([]),w=y(),g=y("0"),s=V({pageNum:1,pageSize:10,total:0}),a=V({dialogVisible:!1,isEdit:!1,form:{promptContent:"",promptType:2,inputSpecialist:"",approveSpecialist:"",aiPromptContent:""}});j(()=>{d()});const S=n=>{const e=new FormData;return Object.entries(n).forEach(([m,c])=>{e.append(m,String(c))}),e},d=async()=>{try{const{data:n}=await M(s.pageNum,s.pageSize);s.total=n.total,v.value=n.rows.map(e=>({...e,promptType:Number(e.promptType)}))}catch{f.error("获取数据失败")}},E=n=>{d()},T=n=>{d()},x=async()=>{try{const n=S(a.form);a.isEdit?(await R(n),f.success("更新成功")):(await $(n),f.success("添加成功")),a.dialogVisible=!1,await d()}catch{f.error("操作失败")}},z=H(()=>g.value==="0"?v.value:v.value.filter(n=>n.promptType.toString()===g.value)),D=()=>{a.isEdit=!1,a.form={promptContent:"",promptType:2,inputSpecialist:"",approveSpecialist:"",aiPromptContent:"",promptId:0},a.dialogVisible=!0},k=n=>{a.isEdit=!0,a.form={...n},a.dialogVisible=!0},P=async n=>{try{await se.confirm("确定删除该记录吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),await G(n.promptId),f.success("删除成功"),await d()}catch{}},U=n=>{console.log("筛选类型变更:",n)},B=()=>{var n;(n=w.value)==null||n.resetFields()};return(n,e)=>{const m=Z,c=K,u=q,i=ee,I=te,N=Q,h=W,_=ne,r=le,C=pe,A=ae,F=X;return Y(),J("div",re,[b("div",de,[b("div",me,[t(c,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=o=>g.value=o),onChange:U},{default:l(()=>[t(m,{value:"0"},{default:l(()=>e[11]||(e[11]=[p("全部类型")])),_:1}),t(m,{value:"1"},{default:l(()=>e[12]||(e[12]=[p("语法检查")])),_:1}),t(m,{value:"2"},{default:l(()=>e[13]||(e[13]=[p("格式检查")])),_:1})]),_:1},8,["modelValue"])]),b("div",ue,[t(u,{type:"primary",onClick:D},{default:l(()=>e[14]||(e[14]=[p(" 新增数据 ")])),_:1})])]),t(N,{data:z.value,border:"",style:{width:"100%","max-height":"80%",overflow:"auto"}},{default:l(()=>[t(i,{label:"序号",type:"index",width:"60"}),t(i,{label:"编校知识",prop:"promptContent","show-overflow-tooltip":""}),t(i,{label:"类型",width:"120"},{default:l(({row:o})=>[t(I,{type:o.promptType==1?"primary":"success",size:"small"},{default:l(()=>[p(oe(o.promptType==1?"语法检查":"格式检查"),1)]),_:2},1032,["type"])]),_:1}),t(i,{label:"录入专家",prop:"inputSpecialist",width:"120"}),t(i,{label:"批准专家",prop:"approveSpecialist",width:"120"}),t(i,{label:"AI提示词",prop:"aiPromptContent","show-overflow-tooltip":""}),t(i,{label:"创建日期",prop:"createTime",width:"180"}),t(i,{label:"操作",width:"180",fixed:"right"},{default:l(({row:o})=>[t(u,{size:"small",onClick:L=>k(o)},{default:l(()=>e[15]||(e[15]=[p("编辑")])),_:2},1032,["onClick"]),t(u,{size:"small",type:"danger",onClick:L=>P(o)},{default:l(()=>e[16]||(e[16]=[p("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),b("div",fe,[t(h,{background:"",layout:"total, sizes, prev, pager, next",total:s.total,"onUpdate:total":e[1]||(e[1]=o=>s.total=o),"page-size":s.pageSize,"onUpdate:pageSize":e[2]||(e[2]=o=>s.pageSize=o),onCurrentChange:E,onSizeChange:T,"current-page":s.pageNum,"onUpdate:currentPage":e[3]||(e[3]=o=>s.pageNum=o)},null,8,["total","page-size","current-page"])]),t(F,{modelValue:a.dialogVisible,"onUpdate:modelValue":e[10]||(e[10]=o=>a.dialogVisible=o),title:a.isEdit?"编辑提示词":"新增提示词",width:"600px",onClosed:B},{default:l(()=>[t(A,{model:a.form,"label-width":"100px"},{default:l(()=>[t(r,{label:"编校知识：",prop:"promptContent"},{default:l(()=>[t(_,{modelValue:a.form.promptContent,"onUpdate:modelValue":e[4]||(e[4]=o=>a.form.promptContent=o),type:"textarea",rows:3,placeholder:"请输入提示词"},null,8,["modelValue"])]),_:1}),t(r,{label:"类型：",prop:"promptType"},{default:l(()=>[t(c,{modelValue:a.form.promptType,"onUpdate:modelValue":e[5]||(e[5]=o=>a.form.promptType=o)},{default:l(()=>[t(C,{value:2},{default:l(()=>e[17]||(e[17]=[p("格式检查")])),_:1}),t(C,{value:1},{default:l(()=>e[18]||(e[18]=[p("语法检查")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"录入专家：",prop:"inputSpecialist"},{default:l(()=>[t(_,{modelValue:a.form.inputSpecialist,"onUpdate:modelValue":e[6]||(e[6]=o=>a.form.inputSpecialist=o),placeholder:"请输入录入专家"},null,8,["modelValue"])]),_:1}),t(r,{label:"批准专家：",prop:"approveSpecialist"},{default:l(()=>[t(_,{modelValue:a.form.approveSpecialist,"onUpdate:modelValue":e[7]||(e[7]=o=>a.form.approveSpecialist=o),placeholder:"请输入批准专家"},null,8,["modelValue"])]),_:1}),t(r,{label:"AI提示词：",prop:"aiPromptContent"},{default:l(()=>[t(_,{modelValue:a.form.aiPromptContent,"onUpdate:modelValue":e[8]||(e[8]=o=>a.form.aiPromptContent=o),type:"textarea",rows:3,placeholder:"请输入AI提示词"},null,8,["modelValue"])]),_:1}),t(r,{class:"dialog-footer"},{default:l(()=>[t(u,{onClick:e[9]||(e[9]=o=>a.dialogVisible=!1)},{default:l(()=>e[19]||(e[19]=[p("取 消")])),_:1}),t(u,{type:"primary",onClick:x},{default:l(()=>e[20]||(e[20]=[p("确 定")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),ve=ie(ge,[["__scopeId","data-v-041d1e2a"]]);export{ve as default};
