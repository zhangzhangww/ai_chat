import"./request-C9YwD_7X.js";/* empty css                  *//* empty css                 *//* empty css                        */import{a as B,u as I,b as U,d as F}from"./promptType-DpiULCtq.js";import{J as L,r as f,A as b,o as P,E as p,a as M,b as g,h as a,w as s,D as A,K as $,L as j,C as O,f as m,M as R,O as J,P as K,Q,R as q,j as G,_ as H}from"./index-BAb06sIO.js";const W={class:"content-item"},X={class:"header"},Y={class:"page"},Z=L({__name:"type",setup(ee){const c=f([]),_=f();f("0");const n=b({pageNum:1,pageSize:10,total:0}),o=b({dialogVisible:!1,isEdit:!1,form:{typeName:"",typeId:1,orderNumber:1}});P(()=>{i()});const w=t=>{const e=new FormData;return Object.entries(t).forEach(([r,d])=>{e.append(r,String(d))}),e},i=async()=>{try{const{data:t}=await B(n.pageNum,n.pageSize);n.total=t.total,c.value=t.rows.map(e=>({...e,promptType:Number(e.promptType)}))}catch{p.error("获取数据失败")}},E=t=>{i()},N=t=>{i()},V=async()=>{try{const t=w(o.form);o.isEdit?(await I(t),p.success("更新成功")):(await U(t),p.success("添加成功")),o.dialogVisible=!1,await i()}catch{p.error("操作失败")}},C=()=>{o.isEdit=!1,o.form={typeName:"",typeId:1,orderNumber:1},o.dialogVisible=!0},v=t=>{o.isEdit=!0,o.form={...t},o.dialogVisible=!0},x=async t=>{try{await q.confirm("确定删除该记录吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),await F(t.typeId),p.success("删除成功"),await i()}catch{}},z=()=>{var t;(t=_.value)==null||t.resetFields()};return(t,e)=>{const r=A,d=R,T=$,k=j,y=Q,u=K,S=J,D=O;return G(),M("div",W,[g("div",X,[e[8]||(e[8]=g("h2",null,"类型管理",-1)),a(r,{type:"primary",onClick:C},{default:s(()=>e[7]||(e[7]=[m("新增类型")])),_:1})]),a(T,{data:c.value,border:"",style:{width:"100%","max-height":"80%",overflow:"auto"}},{default:s(()=>[a(d,{label:"序号",type:"index",width:"60"}),a(d,{label:"类型名称",prop:"typeName","show-overflow-tooltip":""}),a(d,{label:"操作",width:"180",fixed:"right"},{default:s(({row:l})=>[a(r,{size:"small",onClick:h=>v(l)},{default:s(()=>e[9]||(e[9]=[m("编辑")])),_:2},1032,["onClick"]),a(r,{size:"small",type:"danger",onClick:h=>x(l)},{default:s(()=>e[10]||(e[10]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),g("div",Y,[a(k,{background:"",layout:"total, sizes, prev, pager, next",total:n.total,"onUpdate:total":e[0]||(e[0]=l=>n.total=l),"page-size":n.pageSize,"onUpdate:pageSize":e[1]||(e[1]=l=>n.pageSize=l),onCurrentChange:E,onSizeChange:N,"current-page":n.pageNum,"onUpdate:currentPage":e[2]||(e[2]=l=>n.pageNum=l)},null,8,["total","page-size","current-page"])]),a(D,{modelValue:o.dialogVisible,"onUpdate:modelValue":e[6]||(e[6]=l=>o.dialogVisible=l),title:o.isEdit?"编辑类型":"新增类型",width:"600px",onClosed:z},{default:s(()=>[a(S,{model:o.form,"label-width":"100px"},{default:s(()=>[a(u,{label:"类型名称：",prop:"typeName"},{default:s(()=>[a(y,{modelValue:o.form.typeName,"onUpdate:modelValue":e[3]||(e[3]=l=>o.form.typeName=l),type:"textarea",rows:3,placeholder:"请输入类型名称"},null,8,["modelValue"])]),_:1}),a(u,{label:"排序：",prop:"orderNumber"},{default:s(()=>[a(y,{modelValue:o.form.orderNumber,"onUpdate:modelValue":e[4]||(e[4]=l=>o.form.orderNumber=l),type:"text",rows:3,placeholder:"请输入排序"},null,8,["modelValue"])]),_:1}),a(u,{class:"dialog-footer"},{default:s(()=>[a(r,{onClick:e[5]||(e[5]=l=>o.dialogVisible=!1)},{default:s(()=>e[11]||(e[11]=[m("取 消")])),_:1}),a(r,{type:"primary",onClick:V},{default:s(()=>e[12]||(e[12]=[m("确 定")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),re=H(Z,[["__scopeId","data-v-81490884"]]);export{re as default};
