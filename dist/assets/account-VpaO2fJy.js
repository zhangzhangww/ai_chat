import{g as A,u as L,a as M,d as R}from"./aiChat-CyivaIPE.js";import{A as $,r as g,u as y,g as G,E as m,x as j,c as H,a as v,b as t,w as l,y as J,B as K,C as O,D as q,o as Q,G as W,d as p,H as X,I as Y,J as Z,t as ee,K as te,L as oe,M as le,z as ae,N as ne,_ as pe}from"./index-Dt97frTI.js";const se={class:"content-item"},ie={class:"search"},re={class:"search__left"},de={class:"search__right"},me=$({__name:"account",setup(ue){const _=g([]),C=g(),u=g("0"),w=y({pageNum:1,pageSize:10,total:0}),o=y({dialogVisible:!1,isEdit:!1,form:{promptContent:"",promptType:1,inputSpecialist:"",approveSpecialist:"",aiPromptContent:""}});y([{label:"语法检查",value:1},{label:"格式检查",value:2}]),G(()=>{b()});const E=a=>{const e=new FormData;return Object.entries(a).forEach(([r,f])=>{e.append(r,String(f))}),e},b=async()=>{try{const{data:a}=await A();w.total=a.total,_.value=a.data.map(e=>({...e,promptType:Number(e.promptType)}))}catch{m.error("获取数据失败")}},T=async()=>{try{const a=E(o.form);o.isEdit?(await L(a),m.success("更新成功")):(await M(a),m.success("添加成功")),o.dialogVisible=!1,await b()}catch{m.error("操作失败")}},S=j(()=>u.value==="0"?_.value:_.value.filter(a=>a.promptType.toString()===u.value)),x=()=>{o.isEdit=!1,o.form={promptContent:"",promptType:1,inputSpecialist:"",approveSpecialist:"",aiPromptContent:"",promptId:0},o.dialogVisible=!0},D=a=>{o.isEdit=!0,o.form={...a},o.dialogVisible=!0},I=async a=>{try{await ne.confirm("确定删除该记录吗？","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),await R(a.promptId),m.success("删除成功"),await b()}catch{}},k=a=>{console.log("筛选类型变更:",a)},B=()=>{var a;(a=C.value)==null||a.resetFields()};return(a,e)=>{const r=W,f=J,P=X,d=K,s=Y,U=Z,F=O,c=le,i=oe,V=ae,N=te,h=q;return Q(),H("div",se,[v("div",ie,[v("div",re,[t(f,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value=n),onChange:k},{default:l(()=>[t(r,{label:"0"},{default:l(()=>e[8]||(e[8]=[p("全部类型")])),_:1}),t(r,{label:"1"},{default:l(()=>e[9]||(e[9]=[p("语法检查")])),_:1}),t(r,{label:"2"},{default:l(()=>e[10]||(e[10]=[p("格式检查")])),_:1})]),_:1},8,["modelValue"])]),v("div",de,[t(d,{type:"primary",onClick:x},{default:l(()=>[t(P,{class:"el-icon--left"}),e[11]||(e[11]=p("新增数据 "))]),_:1})])]),t(F,{data:S.value,border:"",style:{width:"100%",height:"80%",overflow:"auto"}},{default:l(()=>[t(s,{label:"序号",type:"index",width:"60"}),t(s,{label:"编校知识",prop:"promptContent","show-overflow-tooltip":""}),t(s,{label:"类型",width:"120"},{default:l(({row:n})=>[t(U,{type:n.promptType==1?"primary":"success",size:"small"},{default:l(()=>[p(ee(n.promptType==1?"语法检查":"格式检查"),1)]),_:2},1032,["type"])]),_:1}),t(s,{label:"录入专家",prop:"inputSpecialist",width:"120"}),t(s,{label:"批准专家",prop:"approveSpecialist",width:"120"}),t(s,{label:"AI提示词",prop:"aiPromptContent","show-overflow-tooltip":""}),t(s,{label:"创建日期",prop:"createTime",width:"180"}),t(s,{label:"操作",width:"180",fixed:"right"},{default:l(({row:n})=>[t(d,{size:"small",onClick:z=>D(n)},{default:l(()=>e[12]||(e[12]=[p("编辑")])),_:2},1032,["onClick"]),t(d,{size:"small",type:"danger",onClick:z=>I(n)},{default:l(()=>e[13]||(e[13]=[p("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(h,{modelValue:o.dialogVisible,"onUpdate:modelValue":e[7]||(e[7]=n=>o.dialogVisible=n),title:o.isEdit?"编辑提示词":"新增提示词",width:"600px",onClosed:B},{default:l(()=>[t(N,{model:o.form,"label-width":"100px"},{default:l(()=>[t(i,{label:"编校知识：",prop:"promptContent"},{default:l(()=>[t(c,{modelValue:o.form.promptContent,"onUpdate:modelValue":e[1]||(e[1]=n=>o.form.promptContent=n),type:"textarea",rows:3,placeholder:"请输入提示词"},null,8,["modelValue"])]),_:1}),t(i,{label:"类型：",prop:"promptType"},{default:l(()=>[t(f,{modelValue:o.form.promptType,"onUpdate:modelValue":e[2]||(e[2]=n=>o.form.promptType=n)},{default:l(()=>[t(V,{value:1},{default:l(()=>e[14]||(e[14]=[p("语法检查")])),_:1}),t(V,{value:2},{default:l(()=>e[15]||(e[15]=[p("格式检查")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"录入专家：",prop:"inputSpecialist"},{default:l(()=>[t(c,{modelValue:o.form.inputSpecialist,"onUpdate:modelValue":e[3]||(e[3]=n=>o.form.inputSpecialist=n),placeholder:"请输入录入专家"},null,8,["modelValue"])]),_:1}),t(i,{label:"批准专家：",prop:"approveSpecialist"},{default:l(()=>[t(c,{modelValue:o.form.approveSpecialist,"onUpdate:modelValue":e[4]||(e[4]=n=>o.form.approveSpecialist=n),placeholder:"请输入批准专家"},null,8,["modelValue"])]),_:1}),t(i,{label:"AI提示词：",prop:"aiPromptContent"},{default:l(()=>[t(c,{modelValue:o.form.aiPromptContent,"onUpdate:modelValue":e[5]||(e[5]=n=>o.form.aiPromptContent=n),type:"textarea",rows:3,placeholder:"请输入AI提示词"},null,8,["modelValue"])]),_:1}),t(i,{class:"dialog-footer"},{default:l(()=>[t(d,{onClick:e[6]||(e[6]=n=>o.dialogVisible=!1)},{default:l(()=>e[16]||(e[16]=[p("取 消")])),_:1}),t(d,{type:"primary",onClick:T},{default:l(()=>e[17]||(e[17]=[p("确 定")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),_e=pe(me,[["__scopeId","data-v-ae6802b6"]]);export{_e as default};
